#!/bin/bash

R="\033[1;31m"
G="\033[1;32m"
Goke="\033[92m"
Glig="\e[1;32m"
Y="\033[1;33m"
B="\033[1;34m"
M="\033[1;35m"
C="\033[1;36m"
W="\033[0m"

clear
echo -e "\e[48;31m         ██╗  ██╗     ██╗    ██╗██╗   ██╗██╗     ███╗   ██╗\e[00m"
echo -e "\e[48;31m         ██║ ██╔╝     ██║    ██║██║   ██║██║     ████╗  ██║\e[00m"
echo -e "\e[48;31m         █████╔╝ █████╗██║   ██║██║   ██║██║     ██╔██╗ ██║\e[00m"
echo -e "\e[48;31m         ██╔═██╗╚════╚ ██╗  ██╔╝██║   ██║██║     ██║╚██╗██║\e[00m"
echo -e "\e[48;31m         ██║  ██╗       ╚████╔╝ ╚██████╔╝███████╗██║ ╚████║\e[00m"
echo -e "\e[48;31m         ╚═╝  ╚═╝       ╚═══╝   ╚═════╝ ╚══════╝╚═╝  ╚═══╝\e[00m"                                                 
echo -e "\e[05;35m                            create by @K'ztark                   \e[00m"

echo
echo
function codigo(){
	barra=$(mktemp)
#Script encriptado para generar la barra de escaneo
base64 -d > ${barra}<<DIXIE
IyEvYmluL2Jhc2gKIyBBdXRob3IgOiBUZWRkeSBTa2FyaW4KCiMgMS4gQ3JlYXRlIFByb2dyZXNz
QmFyIGZ1bmN0aW9uCiMgMS4xIElucHV0IGlzIGN1cnJlbnRTdGF0ZSgkMSkgYW5kIHRvdGFsU3Rh
dGUoJDIpCmZ1bmN0aW9uIFByb2dyZXNzQmFyIHsKIyBQcm9jZXNzIGRhdGEKICAgICAgICBsZXQg
X3Byb2dyZXNzPSgkezF9KjEwMC8kezJ9KjEwMCkvMTAwCiAgICAgICAgbGV0IF9kb25lPSgke19w
cm9ncmVzc30qNCkvMTAKICAgICAgICBsZXQgX2xlZnQ9NDAtJF9kb25lCiMgQnVpbGQgcHJvZ3Jl
c3NiYXIgc3RyaW5nIGxlbmd0aHMKICAgICAgICBfZG9uZT0kKHByaW50ZiAiJSR7X2RvbmV9cyIp
CiAgICAgICAgX2xlZnQ9JChwcmludGYgIiUke19sZWZ0fXMiKQoKIyAxLjIgQnVpbGQgcHJvZ3Jl
c3NiYXIgc3RyaW5ncyBhbmQgcHJpbnQgdGhlIFByb2dyZXNzQmFyIGxpbmUKIyAxLjIuMSBPdXRw
dXQgZXhhbXBsZToKIyAxLjIuMS4xIFByb2dyZXNzIDogWyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMj
IyMjIyMjIyMjIyMjIyMjIyNdIDEwMCUKcHJpbnRmICJcckVzY2FuZWFuZG86IFske19kb25lLy8g
LyN9JHtfbGVmdC8vIC8tfV0gJHtfcHJvZ3Jlc3N9JSUiCgp9CgojIFZhcmlhYmxlcwpfc3RhcnQ9
MQoKIyBUaGlzIGFjY291bnRzIGFzIHRoZSAidG90YWxTdGF0ZSIgdmFyaWFibGUgZm9yIHRoZSBQ
cm9ncmVzc0JhciBmdW5jdGlvbgpfZW5kPTEwMAoKIyBQcm9vZiBvZiBjb25jZXB0CmZvciBudW1i
ZXIgaW4gJChzZXEgJHtfc3RhcnR9ICR7X2VuZH0pCmRvCiAgICAgICAgc2xlZXAgMC4xCiAgICAg
ICAgUHJvZ3Jlc3NCYXIgJHtudW1iZXJ9ICR7X2VuZH0KZG9uZQpwcmludGYgICJcZVsxNTs0NW1c
bkNvbXBsZXRhZG8hXG5cZVswMG0iCg==
DIXIE
source ${barra}
rm ${barra}
}
verification=$(mktemp)
#Script encriptado en base para verificar la password de loggin
base64 -d > ${verification}<<DIXIE
IyEvYmluL2Jhc2gKClI9IlwwMzNbMTszMW0iCkc9IlwwMzNbMTszMm0iCkdva2U9IlwwMzNbOTJt
IgpHbGlnPSJcZVsxOzMybSIKWT0iXDAzM1sxOzMzbSIKQj0iXDAzM1sxOzM0bSIKTT0iXDAzM1sx
OzM1bSIKQz0iXDAzM1sxOzM2bSIKVz0iXDAzM1swbSIKWj0iXGVbMDU7OG0iCgpmaWxlPSQobWt0
ZW1wKQplY2hvICJaVzV2Y1hWcFlXNXYiID4gJGZpbGUKcmVhbFBTVz0kKGJhc2U2NCAtZCAkZmls
ZSkKCnByaW50ZiAiJFpbVFlQRSBQQVNTV09SRCBUTyBFWEVDVVRFXVxuXHRcZVswMG0iCndoaWxl
IHJlYWQgLXMgLXAgIi0tLS0tLT4gIiB0eXBlZFBXRCAmJiBbIC16ICR0eXBlZFBXRCBdOyBkbwog
IGNvbnRpbnVlCmRvbmUKCndoaWxlIFsgIiR0eXBlZFBXRCIgIT0gIiRyZWFsUFNXIiBdOyBkbwog
ICAgICAgICBwcmludGYgIiRSXG5cdCAtLS0tLS0+IEVSUk9SIFBBU1NXT1JEJFdcbiIKICAgICAg
ICAgZXhpdApkb25lCmlmIFtbIC1lICRmaWxlIF1dOyB0aGVuCiAgICAgICAgIHJtIC1yZiAkZmls
ZQpmaQoKIyAgICAgICAgICAgQG4wcmQxYzAw
DIXIE
source ${verification}
rm ${verification}

printf "$G \nLOGGED!!!$W"
echo
echo
read -p "[*] {Introduce la dirección IP o Dominio}: " IP      
echo
echo -e "[*]\e[45;31m {Obteniendo cabeceras del host}\e[00m"
echo
whatweb $IP
echo
echo
echo -e "[*]$R {Escaneando el puerto 80}$W "
echo
sleep 2
if timeout 5 bash -c "</dev/tcp/$IP/80 &>/dev/null"
 then
 printf "[*]$R {El puerto esta abierto}$W "
 else
 sleep 2
 echo
 echo "[*]$R {El puerto esta cerrado}$W "
 echo
 fi
 echo
 echo -e "\e[47;31m[*]====>Escaneando puertos y servicios<====\e[00m"
 echo
 codigo
 nmap -p- $IP
 echo
echo -e "[*]\e[40;31m{Puertos y servicios encontrados}\e[00m"
echo
echo -e "\e[47;31m[*]====>{Escaneo y analisis de vulnerabilidades<====\e[00m}"
read -p " Nombre a guardar: " name
cd reportes/nmap/
nmap -sT --script vuln -oA reporte.$name $IP | grep "Discovered open port"
xsltproc reporte.$name.xml -o informe.$name.html 
rm -rf reporte*
cd ../..
codigo
sleep 3
read -p "[*] {Si los puertos de http y https estan abiertos introduzcalos}: " ht  
sleep 2
cd reportes/nikto/  
nikto -h $IP -p $ht -o nikto_$name.html -Format htm | grep "Discovered open port"
sleep 2
echo
cd ../..
echo
codigo
printf "\e[35;32m {Los documentos se guardaron en la carpeta reportes}\e[00m"
